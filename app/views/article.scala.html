@* Copyright 2016 Jan Schnasse, hbz. Licensed under the GNU Affero General Public License *@ 

@(myForm:Form[services.ZettelModel],dataFormat:String,documentId:String,topicId:String)
@import tags._ 
@import services._

@jsonMap=@{ZettelHelper.getJsonMap(myForm)}
@zettel("Artikel",myForm,dataFormat,documentId,topicId) {
	@if(myForm.hasGlobalErrors) {
		<p class="error">@myForm.globalError.message</p>
	} 
	@helper.form(action = routes.ZettelController.postForm(Article.id,dataFormat,documentId,topicId)){
		<a href="@models.Article.getHelpTextUrl()" id="helpTextUrl" style="float:right" target="blank">Hilfe</a>
		@accordion(""){
			@accordionPanel("Angaben zur Publikation","publicationStatus-section"){
				@singleSelect(myForm,"publicationStatus","Publikationsstatus*","select-pg",ArticleHelper.getPublicationStatusMap(),11)
				<br/>
				@singleSelect(myForm,"reviewStatus","Begutachtungsstatus","select-pg",ArticleHelper.getReviewStatusMap(),11)
			}
			@accordionPanel("Titel","title-section"){
				@singlefieldText(myForm,"title","Titel*","",1)
				<br/>
				@singlefieldText(myForm,"alternative","Alternativer Titel","",2)
			}
			@accordionPanel("Urheberschaft","creator-section"){
				@multifieldLd(myForm,jsonMap,"creator","Autor (als Linked Data)*","gnd-person-search",4,ArticleHelper.getPersonLookupEndpoints())
			    <br/>
				@multifieldText(myForm,jsonMap,"creatorName","Autor (als Freitext)*","free-text",4)
				<br/>
				@multifieldLd(myForm,jsonMap,"contributor","Beteiligte (als Linked Data)","gnd-person-search",14,ArticleHelper.getPersonLookupEndpoints())
				<br/>
				@multifieldText(myForm,jsonMap,"contributorName","Beteiligte (als Freitext)","free-text",4)
				<br/>
				@multifieldLd(myForm,jsonMap,"editor","Herausgeber (als Linked Data)*","gnd-person-search",4,ArticleHelper.getPersonLookupEndpoints())
			    <br/>
			    @multifieldLd(myForm,jsonMap,"redaktor","Redakteur (als Linked Data)*","gnd-person-search",4,ArticleHelper.getPersonLookupEndpoints())
			    <br/>
			}
			@accordionPanel("Angaben zur Quelle","upload-section"){
				@multifieldLd(myForm,jsonMap,"containedIn","Erschienen in (Link zur Quelle)","gnd-person-search",1,ArticleHelper.getTitleLookupEndpoints())
				<br/>
				@singlefieldText(myForm,"bibligraphicCitation","Details zur Quelle","",1)
				<br/>
				@singlefieldText(myForm,"volumeIn","Band","",1)
				<br/>
				@singlefieldText(myForm,"issue","Heft","",1)
				<br/>
				@singlefieldText(myForm,"articleNumber","Artikelnummer","",1)
				<br/>
				@singlefieldText(myForm,"pages","Seitenangabe","",1)
				<br/>
				@singlefieldText(myForm,"publicationYear","Erscheinungsjahr","",1)
				<br/>
				@singlefieldText(myForm,"issn","ISSN","",1)
			}
			@accordionPanel("Zuordnung zur Sammlung","collectiopn-section"){
				@multifieldLd(myForm,jsonMap,"institution","Institution (als Linked Data)","gnd-person-search",14,ArticleHelper.getPersonLookupEndpoints())
			}
			@accordionPanel("Dateiupload","upload-section"){
				@singleSelect(myForm,"medium","Medium*","select-medium",ArticleHelper.getMediumMap(),5)
				<br/>
				@singleSelect(myForm,"yearOfCopyright","CopyrightJahr*","datepicker-year",ArticleHelper.getCopyrightYear(),6)
				<br />
				@singlefieldText(myForm,"license","Lizenz (als Link)","",1)
				<br />
				@datepicker(myForm,"embargo","Embargo","datepicker",8)
			}
			@accordionPanel("Erschließung","cataloging-section"){
				@textArea(myForm,"abstractText","Abstract*","",9)
				<br />
				@singleSelect(myForm,"language","Sprache*","select-language",ArticleHelper.getLanguageMap(),10)
				<br /> 
				@singleSelect(myForm,"professionalGroup","Fachgruppe*","select-pg",ArticleHelper.getProfessionalGroupMap(),11)
				<br />
				@multiselect(myForm,jsonMap,"ddc","Fächerklassifikation*","select-ddc",ArticleHelper.getDeweyMap(),12)
				<br />
				@multifieldLd(myForm,jsonMap,"subject","Schlagworte (als Linked Data)","gnd-subject-search",13,ArticleHelper.getSubjectLookupEndpoints())
				<br />
				@multifieldText(myForm,jsonMap,"subjectName","Schlagworte (als Freitext)","free-text",13)
			}
			@accordionPanel("Vorhandene Persistente Identifikatoren","identifier-section"){
				<br />
				@multifieldText(myForm,jsonMap,"urn","Vorhandene URN","",27) 
				<br />
				@multifieldText(myForm,jsonMap,"doi","Vorhandene DOI","",28) 
				<br />
				@multifieldText(myForm,jsonMap,"reference","URL","",29)  
			}
		}
		<div class="form-group row">
			<div class="col-sm-offset-8 col-sm-4">
				<button id="cancel" class="btn cancel">Cancel</button>
				<input type="submit" value="Save" class="btn btn-success" />
			</div>
		</div>
	} 
}
