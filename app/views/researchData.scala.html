@* Copyright 2016 Jan Schnasse, hbz. Licensed under the GNU Affero General Public License *@ 

@(myForm:Form[services.ZettelModel],dataFormat:String,documentId:String,topicId:String,formType:String)
@import tags._ 
@import services._
@jsonMap=@{ZettelHelper.getJsonMap(myForm)}
@zettel("Forschungsdaten",myForm,dataFormat,documentId,topicId,formType) {
	@if(myForm.hasGlobalErrors) {
		<p class="error">@myForm.globalError.message</p>
	} 
	@helper.form(action = routes.ZettelController.postForm(ResearchData.id,dataFormat,documentId,topicId)){
		<a href="@models.ResearchData.getHelpTextUrl()" id="helpTextUrl" style="float:right" target="blank">Hilfe</a>
		@accordion(""){
			@accordionPanel(services.ZettelFields.titleHeaderZF.getLabel(),"title-section"){
				@singlefieldText(myForm,"title",services.ZettelFields.titleZF.getLabel(),"",1)
				<br/>
				@singlefieldText(myForm,"alternative",services.ZettelFields.alternativeTitleZF.getLabel(),"",2)
			}
			@accordionPanel(services.ZettelFields.creatorshipHeaderZF.getLabel(),"creator-section"){
				@multifieldLd(myForm,jsonMap,"creator",services.ZettelFields.creatorZF.getLabel(),"gnd-person-search",4,ResearchDataHelper.getPersonLookupEndpoints())
			<br/>
				@multifieldText(myForm,jsonMap,"creatorName",services.ZettelFields.creatorNameZF.getLabel(),"free-text",4)
			}
			@accordionPanel(services.ZettelFields.uploadHeaderZF.getLabel(),"upload-section"){
				@singleSelect(myForm,"medium",services.ZettelFields.mediumZF.getLabel(),"select-medium",ResearchDataHelper.getMediumMap(),5)
				<br/>
				@singleSelect(myForm,"yearOfCopyright",services.ZettelFields.yearOfCopyrightZF.getLabel(),"datepicker-year",ResearchDataHelper.getCopyrightYear(),6)
				<br />
				@singleSelect(myForm,"license",services.ZettelFields.licenseZF.getLabel(),"select-license",ResearchDataHelper.getLicenseMap(),7)
				<br />
				@datepicker(myForm,"embargoTime",services.ZettelFields.embargoTimeZF.getLabel(),"datepicker",8)
			}
			@accordionPanel(services.ZettelFields.catalogingHeaderZF.getLabel(),"cataloging-section"){
				@singleSelect(myForm,"language",services.ZettelFields.languageZF.getLabel(),"select-language",ResearchDataHelper.getLanguageMap(),10)
				<br/>
				@textArea(myForm,"description",services.ZettelFields.descriptionZF.getLabel(),"",9)
				<br />
				@textArea(myForm,"usageManual",services.ZettelFields.usageManualZF.getLabel(),"",22)
				<br /> 
				@singleSelect(myForm,"professionalGroup",services.ZettelFields.professionalGroupZF.getLabel(),"select-pg",ResearchDataHelper.getProfessionalGroupMap(),11)
				<br />
				@multiselect(myForm,jsonMap,"ddc",services.ZettelFields.ddcZF.getLabel(),"select-ddc",ResearchDataHelper.getDeweyMap(),12)
				<br />
				@multifieldLd(myForm,jsonMap,"subject",services.ZettelFields.subjectZF.getLabel(),"gnd-subject-search",13,ResearchDataHelper.getSubjectLookupEndpoints())
				<br />
				@multifieldText(myForm,jsonMap,"subjectName",services.ZettelFields.subjectNameZF.getLabel(),"free-text",13)
			}
			@accordionPanel(services.ZettelFields.contributorsHeaderZF.getLabel(),"contributor-section"){
				@multifieldLd(myForm,jsonMap,"contributor",services.ZettelFields.contributorZF.getLabel(),"gnd-person-search",14,ResearchDataHelper.getPersonLookupEndpoints())
				<br/>
				@multifieldText(myForm,jsonMap,"contributorName",services.ZettelFields.contributorNameZF.getLabel(),"free-text",4)
				<br /> 
				@multifieldText(myForm,jsonMap,"funding",services.ZettelFields.fundingZF.getLabel(),"",15)
				<br />
				@multifieldText(myForm,jsonMap,"projectId",services.ZettelFields.projectIdZF.getLabel(),"",16)
				<br/>
				@multifieldText(myForm,jsonMap,"fundingProgram",services.ZettelFields.fundingProgramZF.getLabel(),"",17)
			}
			@accordionPanel(services.ZettelFields.observationHeaderZF.getLabel(),"recording-section"){
				@multiselect(myForm,jsonMap,"dataOrigin",services.ZettelFields.dataOriginZF.getLabel(),"select-dataOrigin",ResearchDataHelper.getDataOriginMap(),18)
				<br />
				@textArea(myForm,"recordingPeriod",services.ZettelFields.recordingPeriodZF.getLabel(),"",19)
				<br />
				@multifieldLd(myForm,jsonMap,"recordingLocation",services.ZettelFields.recordingLocationZF.getLabel(),"geonames-lookup",20,ResearchDataHelper.getEmptyLookupEndpoints())
				<br />
				@multifieldLd(myForm,jsonMap,"recordingCoordinates",services.ZettelFields.recordingCoordinatesZF.getLabel(),"geonames-reverse-lookup",21,ResearchDataHelper.getEmptyLookupEndpoints())
			}
			@accordionPanel(services.ZettelFields.publicationsHeaderZF.getLabel(),"link-section"){
			    @multifieldText(myForm,jsonMap,"reference",services.ZettelFields.referenceZF.getLabel(),"",22)
				<br />
				@multifieldText(myForm,jsonMap,"associatedPublication",services.ZettelFields.associatedPublicationZF.getLabel(),"",23)
				<br/>
				@multifieldText(myForm,jsonMap,"associatedDataset",services.ZettelFields.associatedDatasetZF.getLabel(),"",24)
				<br/>
				@singlefieldText(myForm,"nextVersion",services.ZettelFields.nextVersionZF.getLabel(),"",25)
				<br />	<br />
				@singlefieldText(myForm,"previousVersion",services.ZettelFields.previousVersionZF.getLabel(),"",26)
			}
			@accordionPanel(services.ZettelFields.identifiersHeaderZF.getLabel(),"identifier-section"){
				<br />
				@multifieldText(myForm,jsonMap,"urn",services.ZettelFields.urnZF.getLabel(),"",27)
				<br />
				@multifieldText(myForm,jsonMap,"doi",services.ZettelFields.doiZF.getLabel(),"",28)
				<br />
				@multifieldText(myForm,jsonMap,"reference",services.ZettelFields.isLikeZF.getLabel(),"",29)
			}
		}
		<div class="form-group row">
			<div class="col-sm-offset-8 col-sm-4">
				<button id="cancel" class="btn cancel">Cancel</button>
				<input type="submit" value="Save" class="btn btn-success" />
			</div>
		</div>
	} 
}
