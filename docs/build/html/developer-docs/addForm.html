
<!DOCTYPE html>

<html lang="de">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Neue Formularfelder in Maske integrieren &#8212; zettelDocs 0.0.1 Dokumentation</title>
    <link rel="stylesheet" href="../_static/hbz.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/translations.js"></script>
    <link rel="index" title="Stichwortverzeichnis" href="../genindex.html" />
    <link rel="search" title="Suche" href="../search.html" />
    <link rel="next" title="Bisher verfügbare Formulartypen" href="availableForms.html" />
    <link rel="prev" title="Neue Erfassungsmaske erstellen" href="createNewFormMask.html" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Neuton&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nobile:regular,italic,bold,bolditalic&amp;subset=latin" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="../_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->

  </head><body>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Stichwortverzeichnis"
             accesskey="I">Index</a></li>
        <li class="right" >
          <a href="availableForms.html" title="Bisher verfügbare Formulartypen"
             accesskey="N">weiter</a> |</li>
        <li class="right" >
          <a href="createNewFormMask.html" title="Neue Erfassungsmaske erstellen"
             accesskey="P">zurück</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">zettelDocs 0.0.1 Dokumentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Neue Formularfelder in Maske integrieren</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="neue-formularfelder-in-maske-integrieren">
<h1>Neue Formularfelder in Maske integrieren<a class="headerlink" href="#neue-formularfelder-in-maske-integrieren" title="Link zu dieser Überschrift">¶</a></h1>
<p>Die Einbindung neuer Formularfelder erfolgt zunächst durch Ergänzung des entsprechenden Scala-Views unter app/views/ (z.B. <code class="docutils literal notranslate"><span class="pre">researchDataKtbl.scala.html</span></code>)
um neue Formular-Felder. Beispiel:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>@accordionPanel(services.ZettelFields.ktblHeaderZF.getLabel(),&quot;ktbl-section&quot;){
        <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
        @singleSelect(myForm,&quot;livestock&quot;,services.ZettelFields.livestockZF.getLabel(),&quot;select-livestock&quot;,KtblDataHelper.getLivestockType(),11)
        <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
}
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Zunächst wird ein Akkordion als übergreifende Maske für die neuen Formularfelder vereinbart. Das Akkordion ermöglicht, die Formularfelder eingeklappt oder ausgeklappt anzuzeigen.</p></li>
<li><p>Ein <code class="docutils literal notranslate"><span class="pre">&#64;singleSelect</span></code> wird angelegt. Hierbei ist zu beachten die, dass die Klassen und Methodenaufrufe existieren. Dafür muss</p></li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>in der Klasse <code class="docutils literal notranslate"><span class="pre">services.ZettelFields</span></code> eine neue Etikett-Instanz livestockZF vereinbart werden. Bisher existiert für jeden für ein Formularfeld benötigten Bezeichner eine explizit in der Klasse ZettelFields vereinbarte (hardcodierte) Etikett-Instanz.</p></li>
<li><p>In einer der Helper-Klassen eine neue spezifische Methode z.B. <code class="docutils literal notranslate"><span class="pre">KtblDataHelper.getLivestockType()</span></code> erzeugt werden.</p></li>
<li><p>Bisher wurden fast immer auch die Auswahloptionen in der Klasse als HashMap untergebracht. Dadurch muss die gesamte Zettel-Applikation neu erzeugt werden, wenn sich an den Auswahloptionen etwas ändert.</p></li>
</ol>
</div></blockquote>
<p>Am Beispiel der Anlage des multiselects-Formularfelds soll eine <em>neue vereinfachte</em> Möglichkeit gezeigt werden, neue Formularfelder anzulegen.</p>
<p>Beispiel:</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span>@accordionPanel(services.ZettelFields.ktblHeaderZF.getLabel(),&quot;ktbl-section&quot;){
        <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
        @singleSelect(myForm,&quot;livestock&quot;,services.ZettelFields.livestockZF.getLabel(),&quot;select-livestock&quot;,KtblDataHelper.getLivestockType(),11)
        <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
        @multiselect(myForm,jsonMap,&quot;dataOrigin&quot;,services.ZettelFields.dataOriginZF.getLabel(),&quot;select-dataOrigin&quot;,GenericDataHelper.getFieldSelectValues(&quot;ktbl.livestock.properties&quot;, &quot;info.ktbl.livestock&quot;),112)
        <span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
}
</pre></div>
</div>
<ol class="arabic simple">
<li><p>Ein <code class="docutils literal notranslate"><span class="pre">&#64;multiselect</span></code> wird angelegt. Hierbei ist zu beachten, dass die Klassen und Methodenaufrufe existieren. Dafür muss</p></li>
</ol>
<blockquote>
<div><ol class="loweralpha simple">
<li><p>in der Klasse <code class="docutils literal notranslate"><span class="pre">services.ZettelFields</span></code> eine neue Etikett-Instanz livestockZF vereinbart werden. <strong>Es soll im nächsten Schritt versucht werden, auch hier generischen Code einzuführen, der auf hardcodierte Etikett-Instanzen verzichtet.</strong></p></li>
<li><p>Die generische Klasse GenericDataHelper mit der generischen Methode <code class="docutils literal notranslate"><span class="pre">.getFieldSelectValues(&quot;Dateiname&quot;,</span> <span class="pre">&quot;NamensPattern&quot;)</span></code> <a class="footnote-reference brackets" href="#id2" id="id1">1</a>  erzeugt werden.</p></li>
<li><p>Eine Konfigurations-Datei mit Dateiname entsprechend der Vorgaben der Properties-Klasse im Verzeichnis conf angelegt werden. Durch den NamensPattern ist es möglich, für ein Formularfeld nur bestimmte Werte aus dieser Datei zu übernehmen. Es kann aber auch für jedes Formularfeld eine eigene Datei angelegt werden.</p></li>
</ol>
</div></blockquote>
<p>Das folgende Beispiel zeigt die Konfigurationsdatei für mehrere Formularfelder, sowie eine erste (nicht funktionale) Implementierung für unterschiedliche Sprachen.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># Tierart
info.ktbl.livestock.de.cattle=Rind
info.ktbl.livestock.de.swine=Schwein
info.ktbl.livestock.de.hens=Huhn
info.ktbl.livestock.de.turkey=Pute
info.ktbl.livestock.de.duck=Ente
info.ktbl.livestock.en.cattle=Cattle
info.ktbl.livestock.fr.cattle=Bovin
# Produktionsrichtung
info.ktbl.livestock.cattle.de.diary_farming=Milchviehhaltung
info.ktbl.livestock.cattle.de.calf_fattening=Kälbermast
# Lüftung
info.ktbl.ventilation.de.enforced_ventilation=zwangsgelüftet
info.ktbl.ventilation.de.self_ventilation=freigelüftet
info.ktbl.ventilation.de.combined_ventilation=kombinierte Lüftung
# Emmissionen
info.ktbl.emmision.de.ammonium=Ammoniak (NH&lt;sub&gt;2&lt;/sub&gt;)
info.ktbl.emission.de.carbondioxide=Kohlendioxid (C0&lt;sub&gt;2&lt;/sub&gt;)
info.ktbl.emission.de.diammoniumoxide=Lachgas (N&lt;sup&gt;2&lt;/sup&gt;O)
info.ktbl.emission.de.methane=Methan (CH&lt;sub&gt;4&lt;/sub&gt;O)
info.ktbl.emission.de.smells=Geruch
info.ktbl.emission.de.particle=Partikel (Staub)
info.ktbl.emission.de.biogene_aerosole=Bioaerosole
info.ktbl.emission.de.others=andere
</pre></div>
</div>
<p>Text hier</p>
<blockquote>
<div><dl class="footnote brackets">
<dt class="label" id="id2"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Das NamensPattern für die Auswahl der Tierart lautet im Beispiel <code class="docutils literal notranslate"><span class="pre">info.ktbl.livestock</span></code>. Die Sprachvariable trennt das NamensPattern von den Auswahloptionen.</p>
</dd>
</dl>
</div></blockquote>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Vorheriges Thema</h4>
  <p class="topless"><a href="createNewFormMask.html"
                        title="vorheriges Kapitel">Neue Erfassungsmaske erstellen</a></p>
  <h4>Nächstes Thema</h4>
  <p class="topless"><a href="availableForms.html"
                        title="nächstes Kapitel">Bisher verfügbare Formulartypen</a></p>
  <div role="note" aria-label="source link">
    <h3>Diese Seite</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/developer-docs/addForm.rst.txt"
            rel="nofollow">Quellcode anzeigen</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Schnellsuche</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Los" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Stichwortverzeichnis"
             >Index</a></li>
        <li class="right" >
          <a href="availableForms.html" title="Bisher verfügbare Formulartypen"
             >weiter</a> |</li>
        <li class="right" >
          <a href="createNewFormMask.html" title="Neue Erfassungsmaske erstellen"
             >zurück</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">zettelDocs 0.0.1 Dokumentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Neue Formularfelder in Maske integrieren</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, Andres Quast.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>